/*! Copyright 2025 Adobe
All Rights Reserved. */
import"../chunks/fetch-graphql.js";import{s as l,e as C}from"../chunks/setShippingAddress.js";import{debounce as g}from"@dropins/tools/lib.js";import"@dropins/tools/event-bus.js";import{s as y}from"../chunks/setBillingAddress.js";import{b as K,c as L,g as Q,a as W,i as X}from"../chunks/events.js";import{a as A}from"../chunks/dom.js";import{g as Z,s as B}from"../chunks/dom.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/transform-shipping-estimate.js";import"../chunks/transform-shipping-methods.js";import"../chunks/values.js";import"../chunks/synchronizeCheckout.js";import"../fragments.js";import"../chunks/classifiers.js";import"../chunks/guards.js";import"../chunks/events2.js";let f=0;function D({type:e="shipping",debounceMs:t=0,placeOrderBtn:r}){const i=e==="shipping"?l:y,o=g(s=>{f+=1,i(s).catch(console.error).finally(()=>{f-=1,f===0&&(r==null||r.setProps(n=>({...n,disabled:!1})))})},t);return({data:s,isDataValid:n})=>{if(!n)return;r==null||r.setProps(c=>({...c,disabled:!0}));const u=d(s);o(u)}}function R({debounceMs:e=0}){let t={},r=!1;const i=g(o=>{var n,u,c,p;if(r)return;const s={country_code:o.countryCode,region_name:String(((n=o.region)==null?void 0:n.regionCode)||""),region_id:String(((u=o.region)==null?void 0:u.regionId)||""),zip:o.postcode};C({criteria:s}),t={countryCode:o.countryCode,regionCode:((c=o.region)==null?void 0:c.regionCode)||"",regionId:((p=o.region)==null?void 0:p.regionId)||"",postcode:o.postcode}},e);return({data:o,isDataValid:s})=>{var n,u;if(s){r=!0;return}t.countryCode===o.countryCode&&t.regionCode===(((n=o.region)==null?void 0:n.regionCode)||"")&&t.regionId===(((u=o.region)==null?void 0:u.regionId)||"")&&t.postcode===o.postcode||i(o)}}function h(e,t=!1){var n;const{name:r,ref:i}=e,o=document.forms.namedItem(r);if(!o||o.offsetParent===null)return!0;o.setAttribute("novalidate","");const s=((n=i==null?void 0:i.current)==null?void 0:n.handleValidationSubmit(!1))??o.checkValidity();return!s&&t&&A(o),s}function $(e){for(const t of e)if(!h(t,!0))return!1;return!0}function z(e){return document.createRange().createContextualFragment(e)}function U(e){return function(t){return e.querySelector(t)}}function m(e,t,r){if(!e||!r)return;const i=document.head.querySelector(`meta[${r}="${e}"]`);if(!t){i==null||i.remove();return}if(i)i.setAttribute("content",t);else{const o=document.createElement("meta");o.setAttribute(r,e),o.setAttribute("content",t),document.head.appendChild(o)}}function j(e){m("title",e,"name"),m("description",e,"name"),m("keywords",e,"name"),m("og:description",e,"property"),m("og:title",e,"property"),m("og:url",window.location.href,"property")}const d=e=>{var i,o,s;if(!(!(e!=null&&e.id)&&!(e!=null&&e.uid)))return{customerAddressId:e.id,customerAddressUid:e.uid};const r=(i=e.customAttributes)==null?void 0:i.map(({code:n,value:u})=>({code:n,value:String(u)}));return{address:{city:e.city,company:e==null?void 0:e.company,countryCode:e.countryCode,customAttributes:r,fax:e.fax,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,postcode:e.postcode,prefix:e.prefix,region:(o=e==null?void 0:e.region)==null?void 0:o.regionCode,regionId:(s=e==null?void 0:e.region)==null?void 0:s.regionId,street:e.street,suffix:e.suffix,telephone:e.telephone,vatId:e.vatId,saveInAddressBook:e.saveAddressBook}}},G=e=>{var t,r,i;return{city:e.city,company:e==null?void 0:e.company,countryCode:(t=e.country)==null?void 0:t.code,customAttributes:e.customAttributes,fax:e.fax,firstName:e.firstName,lastName:e.lastName,middleName:e.middleName,postcode:e.postCode,prefix:e.prefix,region:{regionCode:(r=e.region)==null?void 0:r.code,regionId:(i=e.region)==null?void 0:i.id},street:e.street,suffix:e.suffix,telephone:e.telephone,vatId:e.vatId}};export{z as createFragment,m as createMetaTag,U as createScopedSelector,R as estimateShippingCost,K as getCartAddress,L as getCartPaymentMethod,Q as getCartShippingMethod,Z as getParentContainer,W as isEmptyCart,X as isVirtualCart,B as scrollToElement,A as scrollToParentContainer,D as setAddressOnCart,j as setMetaTags,d as transformAddressFormValuesToAddressInput,G as transformCartAddressToFormValues,h as validateForm,$ as validateForms};
//# sourceMappingURL=utils.js.map
