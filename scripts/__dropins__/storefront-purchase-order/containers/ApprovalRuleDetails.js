/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as e,jsxs as u,Fragment as b}from"@dropins/tools/preact-jsx-runtime.js";import{PriceRange as O,Card as T,Button as C}from"@dropins/tools/components.js";import{classes as h}from"@dropins/tools/lib.js";import"@dropins/tools/event-bus.js";import"../chunks/FormLoader.js";import{P as L}from"../chunks/PurchaseOrdersHeader.js";import{useState as f,useEffect as x,useMemo as N}from"@dropins/tools/preact-hooks.js";import{g as _}from"../chunks/getPurchaseOrderApprovalRule.js";import{Text as a,useText as g}from"@dropins/tools/i18n.js";import{F as w}from"../chunks/FormLoader2.js";import"../chunks/fetch-graphql.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/transform-purchase-order-approval-rule.js";const y=({approvalRuleID:l,routeApprovalRulesList:r})=>{const[t,i]=f(!0),[o,c]=f(null);x(()=>{l&&(i(!0),_(l).then(s=>{s.uid&&c(s)}).catch(()=>{c(null)}).finally(()=>{i(!1)}))},[l]);const m=N(()=>{if(!o||t)return[];const{name:s,status:p,description:R,appliesToRoles:P,approverRoles:D,condition:d}=o;return[{label:e(a,{id:"PurchaseOrders.approvalRuleDetails.fields.ruleName"}),value:s},{label:e(a,{id:"PurchaseOrders.approvalRuleDetails.fields.status"}),value:e(a,{id:`PurchaseOrders.approvalRuleDetails.fields.statusView.${p.toLocaleLowerCase()}`})},{label:e(a,{id:"PurchaseOrders.approvalRuleDetails.fields.description"}),value:R},{label:e(a,{id:"PurchaseOrders.approvalRuleDetails.fields.appliesTo"}),value:e("ul",{children:P.map(n=>e("li",{children:n.name},n.id))})},{label:e(a,{id:"PurchaseOrders.approvalRuleDetails.fields.ruleType"}),value:e(a,{id:`PurchaseOrders.approvalRuleDetails.fields.condition.attribute.${d.attribute.toLocaleLowerCase()}`})},{label:u(b,{children:[e(a,{id:`PurchaseOrders.approvalRuleDetails.fields.condition.attribute.${d.attribute.toLocaleLowerCase()}`}),":"]}),value:u("div",{children:[e(a,{id:`PurchaseOrders.approvalRuleDetails.fields.condition.operator.${d.operator.toLocaleLowerCase()}`}),e(a,{id:"PurchaseOrders.approvalRuleDetails.fields.amount.label"}),e(O,{amount:d.amount.value,currency:d.amount.currency})]})},{label:e(a,{id:"PurchaseOrders.approvalRuleDetails.fields.requiresApprovalFrom"}),value:e("ul",{children:D.map(n=>e("li",{children:n.name},n.id))})}]},[o,t]);return{handleRedirectToList:()=>{window.location.href=(r==null?void 0:r())??""},loading:t,formValues:m}},F=({formValues:l})=>e("div",{className:h(["b2b-purchase-order-approval-rule-details-content"]),children:l.map((r,t)=>u("div",{className:h(["b2b-purchase-order-approval-rule-details-content__item"]),children:[e("span",{className:"b2b-purchase-order-approval-rule-details-content__label",children:r.label}),e("div",{className:"b2b-purchase-order-approval-rule-details-content__value",children:r.value})]},t))}),J=({withHeader:l=!0,withWrapper:r=!0,className:t,approvalRuleID:i,routeApprovalRulesList:o})=>{const c=g({headerText:"PurchaseOrders.approvalRuleDetails.containerTitle"}),{handleRedirectToList:m,loading:v,formValues:s}=y({routeApprovalRulesList:o,approvalRuleID:i});if(!i)return null;const p=v?e(w,{className:"approval-rule-details--loader","data-testid":"approval-rule-details-container--loader"}):u(b,{children:[e(F,{formValues:s}),e(C,{className:"approval-rule-details__button",onClick:m,children:e(a,{id:"PurchaseOrders.approvalRuleDetails.buttons.back"})})]});return u("div",{className:h(["approval-rule-details",t]),"data-testid":"approval-rule-details-container",children:[l?e(L,{headerText:c.headerText}):null,r?e(T,{variant:"secondary","data-testid":"approvalRuleDetailsCard",children:p}):p]})};export{J as ApprovalRuleDetails,J as default};
//# sourceMappingURL=ApprovalRuleDetails.js.map
