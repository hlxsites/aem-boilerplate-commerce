/*! Copyright 2025 Adobe
All Rights Reserved. */
import{useState as l,useEffect as p,useMemo as c}from"@dropins/tools/preact-hooks.js";import{events as i}from"@dropins/tools/event-bus.js";const d=a=>{if(!a)return{isAdmin:!1,purchaseOrderEnabled:!1,role:{id:"",name:""},permissions:{purchaseOrderAll:!1,viewPurchaseOrders:!1,viewPurchaseOrdersForSubordinates:!1,viewPurchaseOrdersForCompany:!1,autoApprovePurchaseOrder:!1,superApprovePurchaseOrder:!1,viewApprovalRules:!1,manageApprovalRules:!1}};const r=a.admin===!0,e=s=>{const n=a[s];return n===!1?!1:n===!0?!0:r},u={purchaseOrderAll:e("Magento_PurchaseOrder::all"),viewPurchaseOrders:e("Magento_PurchaseOrder::view_purchase_orders"),viewPurchaseOrdersForSubordinates:e("Magento_PurchaseOrder::view_purchase_orders_for_subordinates"),viewPurchaseOrdersForCompany:e("Magento_PurchaseOrder::view_purchase_orders_for_company"),autoApprovePurchaseOrder:e("Magento_PurchaseOrder::autoapprove_purchase_order"),superApprovePurchaseOrder:e("Magento_PurchaseOrderRule::super_approve_purchase_order"),viewApprovalRules:e("Magento_PurchaseOrderRule::view_approval_rules"),manageApprovalRules:e("Magento_PurchaseOrderRule::manage_approval_rules")},o=Object.values(a).some(s=>s===!1)?!1:Object.values(u).some(s=>s===!0);return{isAdmin:r,purchaseOrderEnabled:o,role:{id:"",name:r?"Company Administrator":""},permissions:u}},v=()=>{const a=i.lastPayload("auth/permissions"),[r,e]=l(a);p(()=>{const o=i.on("auth/permissions",s=>{e(s)},{eager:!0});return()=>{o==null||o.off()}},[]);const u=!r;return{permissions:c(()=>d(r),[r]),loadingPermissions:u}};export{v as u};
//# sourceMappingURL=useCustomerRolePermissions.js.map
