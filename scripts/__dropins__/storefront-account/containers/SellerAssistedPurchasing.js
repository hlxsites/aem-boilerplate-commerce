/*! Copyright 2026 Adobe
All Rights Reserved. */
import{jsx as s,jsxs as f}from"@dropins/tools/preact-jsx-runtime.js";import{debounce as C,classes as k}from"@dropins/tools/lib.js";import"@dropins/tools/event-bus.js";import{u as x,g as S}from"../chunks/updateCustomer.js";import{useState as h,useRef as v,useEffect as P,useCallback as m}from"@dropins/tools/preact-hooks.js";import"../chunks/SellerAssistedPurchasingControl.js";import"@dropins/tools/preact-compat.js";import{Skeleton as w,SkeletonRow as L,InLineAlert as p,Checkbox as M}from"@dropins/tools/components.js";import{useText as y}from"@dropins/tools/i18n.js";import"../chunks/removeCustomerAddress.js";import"@dropins/tools/fetch-graphql.js";import"../fragments.js";import"../chunks/initialize.js";import"@dropins/tools/preact.js";const D=()=>{const[o,a]=h(!0),[r,n]=h(!1),[i,t]=h(!1),[c,l]=h(!0),u=v(C(e=>{console.log("useSellerAssistedPurchasing - checked value:",e),console.log("useSellerAssistedPurchasing - checked type:",typeof e),console.log("useSellerAssistedPurchasing - calling updateCustomer with:",{allowRemoteShoppingAssistance:e}),x({allowRemoteShoppingAssistance:e}).catch(g=>{console.error("Failed to update remote shopping assistance:",g),t(!e)})},500)).current;P(()=>{S().then(e=>{n(!0),t(e.allowRemoteShoppingAssistance??!1)}).finally(()=>{a(!1)})},[]);const b=m(e=>{const d=e.target.checked;console.log("handleCheckboxChange - event:",e),console.log("handleCheckboxChange - target.checked:",d),console.log("handleCheckboxChange - checked type:",typeof d),t(d),u(d),d||l(!0)},[u]),A=m(()=>{l(!1)},[]);return{loading:o,isFeatureAvailable:r,isEnabled:i,showAlert:c,handleCheckboxChange:b,handleDismissAlert:A}},R=({loading:o,isFeatureAvailable:a,isEnabled:r,showAlert:n,checkboxLabel:i,alertMessage:t,featureDisabledMessage:c,handleCheckboxChange:l,handleDismissAlert:u})=>o?s(w,{children:s(L,{variant:"row",size:"medium"})}):a?f("div",{className:"account-seller-assisted-purchasing-card",children:[!r&&n&&s("div",{className:"account-seller-assisted-purchasing-card__alert",children:s(p,{variant:"primary",heading:t,onDismiss:u})}),s(M,{name:"sellerAssistedPurchasing",label:i,checked:r,onChange:l})]}):s("div",{className:"account-seller-assisted-purchasing-card__alert",children:s(p,{variant:"primary",heading:c,onDismiss:u})}),K=({className:o})=>{const a=y({checkboxLabel:"Account.sellerAssistedPurchasing.checkboxLabel",alertMessage:"Account.sellerAssistedPurchasing.alertMessage",featureDisabledMessage:"Account.sellerAssistedPurchasing.featureDisabledMessage"}),{loading:r,isFeatureAvailable:n,isEnabled:i,showAlert:t,handleCheckboxChange:c,handleDismissAlert:l}=D();return s("div",{className:k(["account-seller-assisted-purchasing",o]),"data-testid":"sellerAssistedPurchasingId",children:s(R,{loading:r,isEnabled:i,showAlert:t,checkboxLabel:a.checkboxLabel,alertMessage:a.alertMessage,featureDisabledMessage:a.featureDisabledMessage,handleCheckboxChange:c,handleDismissAlert:l,isFeatureAvailable:n})})};export{K as SellerAssistedPurchasing,K as default};
//# sourceMappingURL=SellerAssistedPurchasing.js.map
