/*! Copyright 2026 Adobe
All Rights Reserved. */
import{jsx as e,jsxs as A}from"@dropins/tools/preact-jsx-runtime.js";import{debounce as C,classes as k}from"@dropins/tools/lib.js";import"@dropins/tools/event-bus.js";import{u as x,g as v}from"../chunks/updateCustomer.js";import{useState as u,useRef as S,useEffect as L,useCallback as g}from"@dropins/tools/preact-hooks.js";import"../chunks/SellerAssistedPurchasingControl.js";import"@dropins/tools/preact-compat.js";import{Skeleton as M,SkeletonRow as P,InLineAlert as p,Checkbox as w}from"@dropins/tools/components.js";import{useText as D}from"@dropins/tools/i18n.js";import"../chunks/removeCustomerAddress.js";import"@dropins/tools/fetch-graphql.js";import"../fragments.js";import"../chunks/initialize.js";import"@dropins/tools/preact.js";const F=()=>{const[l,s]=u(!0),[t,n]=u(!1),[o,a]=u(!1),[c,r]=u(!0),d=S(C(i=>{x({allowRemoteShoppingAssistance:String(i)}).catch(h=>{console.error("Failed to update remote shopping assistance:",h),a(!i)})},500)).current;L(()=>{v().then(i=>{n(!0),a(i.allowRemoteShoppingAssistance??!1)}).finally(()=>{s(!1)})},[]);const b=g(i=>{const m=i.target.checked;a(m),d(m),m||r(!0)},[d]),f=g(()=>{r(!1)},[]);return{loading:l,isFeatureAvailable:t,isEnabled:o,showAlert:c,handleCheckboxChange:b,handleDismissAlert:f}},I=({loading:l,isFeatureAvailable:s,isEnabled:t,showAlert:n,checkboxLabel:o,alertMessage:a,featureDisabledMessage:c,handleCheckboxChange:r,handleDismissAlert:d})=>l?e(M,{children:e(P,{variant:"row",size:"medium"})}):s?A("div",{className:"account-seller-assisted-purchasing-card",children:[!t&&n&&e("div",{className:"account-seller-assisted-purchasing-card__alert",children:e(p,{variant:"primary",heading:a,onDismiss:d})}),e(w,{name:"sellerAssistedPurchasing",label:o,checked:t,onChange:r})]}):e("div",{className:"account-seller-assisted-purchasing-card__alert",children:e(p,{variant:"primary",heading:c,onDismiss:d})}),K=({className:l})=>{const s=D({checkboxLabel:"Account.sellerAssistedPurchasing.checkboxLabel",alertMessage:"Account.sellerAssistedPurchasing.alertMessage",featureDisabledMessage:"Account.sellerAssistedPurchasing.featureDisabledMessage"}),{loading:t,isFeatureAvailable:n,isEnabled:o,showAlert:a,handleCheckboxChange:c,handleDismissAlert:r}=F();return e("div",{className:k(["account-seller-assisted-purchasing",l]),"data-testid":"sellerAssistedPurchasingId",children:e(I,{loading:t,isEnabled:o,showAlert:a,checkboxLabel:s.checkboxLabel,alertMessage:s.alertMessage,featureDisabledMessage:s.featureDisabledMessage,handleCheckboxChange:c,handleDismissAlert:r,isFeatureAvailable:n})})};export{K as SellerAssistedPurchasing,K as default};
//# sourceMappingURL=SellerAssistedPurchasing.js.map
