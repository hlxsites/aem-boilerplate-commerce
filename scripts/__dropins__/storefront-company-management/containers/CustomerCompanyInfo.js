/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as o,jsxs as i}from"@dropins/tools/preact-jsx-runtime.js";import{useState as m,useEffect as c}from"@dropins/tools/preact-hooks.js";/* empty css                                   */import{Card as d,Skeleton as p,SkeletonRow as s}from"@dropins/tools/components.js";import{events as f}from"@dropins/tools/event-bus.js";import{classes as u}from"@dropins/tools/lib.js";import{g as h}from"../chunks/getCustomerCompany.js";import{useText as y}from"@dropins/tools/i18n.js";import"../chunks/network-error.js";import"../chunks/fetch-error.js";import"../chunks/fetch-graphql.js";import"@dropins/tools/fetch-graphql.js";const g=({customerCompanyInfo:e,loading:t,className:a})=>{const r=y({companyName:"Company.shared.fields.companyName",jobTitle:"Company.shared.fields.jobTitle",workPhoneNumber:"Company.shared.fields.workPhoneNumber",userRole:"Company.shared.fields.userRole"});return t?o(d,{variant:"secondary",className:u(["customer-company-info-card",a]),children:o("div",{className:"customer-company-info-card__content",children:i(p,{"data-testid":"customerCompanyInfoSkeletonLoader",children:[o(s,{variant:"heading",size:"xlarge",fullWidth:!1,lines:1}),o(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1}),o(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1}),o(s,{variant:"heading",size:"xlarge",fullWidth:!0,lines:1})]})})}):e?o(d,{variant:"secondary",className:u(["customer-company-info-card",a]),children:i("div",{className:"customer-company-info-card__content",children:[i("p",{children:[r.companyName,": ",e.companyName]}),e.jobTitle&&i("p",{children:[r.jobTitle,": ",e.jobTitle]}),e.workPhoneNumber&&i("p",{children:[r.workPhoneNumber,": ",e.workPhoneNumber]}),e.userRole&&i("p",{children:[r.userRole,": ",e.userRole]})]})}):null},N=()=>{const[e,t]=m(null),[a,r]=m(!0),l=async()=>{try{r(!0);const n=await h();t(n)}catch(n){console.error("Failed to fetch customer company info:",n),t(null)}finally{r(!1)}};return c(()=>{l()},[]),c(()=>{const n=f.on("companyContext/changed",l,{eager:!0});return()=>{n==null||n.off()}},[]),{companyInfo:e,loading:a}},W=({className:e})=>{const{companyInfo:t,loading:a}=N();return o(g,{customerCompanyInfo:t,loading:a,className:e})};export{W as CustomerCompanyInfo};
//# sourceMappingURL=CustomerCompanyInfo.js.map
