/*! Copyright 2026 Adobe
All Rights Reserved. */
import{jsxs as m,jsx as t,Fragment as N}from"@dropins/tools/preact-jsx-runtime.js";import{useState as L,useCallback as p}from"@dropins/tools/preact-hooks.js";import{R as _}from"./RequisitionListModal.js";import{R as b}from"./RequisitionListForm.js";import{u as k}from"./updateRequisitionList.js";import{d as M}from"./deleteRequisitionList.js";import{useText as x}from"@dropins/tools/i18n.js";const T=({name:i,description:a,backLink:s,actions:e,className:u,...f})=>m("div",{...f,className:`requisition-list-header ${u||""}`,children:[s&&t("div",{className:"requisition-list-header__back",children:m("a",{href:s.url,className:"requisition-list-header__back-link",onClick:s.onClick,children:[t("span",{className:"requisition-list-header__back-arrow",children:"<"}),s.label]})}),m("div",{className:"requisition-list-header__main",children:[m("div",{className:"requisition-list-header__title-section",children:[t("h1",{className:"requisition-list-header__title",children:i}),a&&t("p",{className:"requisition-list-header__description",children:a})]}),e&&(e.onRename||e.onDelete)&&m("div",{className:"requisition-list-header__actions",children:[e.onRename&&t("a",{href:"#",onClick:n=>{var l;n.preventDefault(),(l=e.onRename)==null||l.call(e)},className:"requisition-list-header__action-link","data-testid":"rename-list-btn",children:e.renameLabel}),e.onDelete&&t("a",{href:"#",onClick:n=>{var l;n.preventDefault(),(l=e.onDelete)==null||l.call(e)},className:"requisition-list-header__action-link","data-testid":"delete-list-btn",children:e.deleteLabel})]})]})]}),H=({requisitionList:i,routeRequisitionListGrid:a,onUpdate:s,onAlert:e,enrichConfigurableProducts:u})=>{const[f,n]=L(!1),[l,h]=L(!1),[g,q]=L(!1),o=x({actionBackToRequisitionLists:"RequisitionList.RequisitionListView.actionBackToRequisitionLists",actionRename:"RequisitionList.RequisitionListView.actionRename",actionDeleteList:"RequisitionList.RequisitionListView.actionDeleteList",deleteListTitle:"RequisitionList.RequisitionListView.deleteListTitle",deleteListMessage:"RequisitionList.RequisitionListView.deleteListMessage",confirmAction:"RequisitionList.RequisitionListWrapper.confirmAction",cancelAction:"RequisitionList.RequisitionListWrapper.cancelAction",updateTitle:"RequisitionList.RequisitionListForm.updateTitle"}),w=p(()=>{n(!0)},[]),y=p(async d=>{var c,r;try{const R=await k(i.uid,d.name,d.description,(c=i.page_info)==null?void 0:c.page_size,(r=i.page_info)==null?void 0:r.current_page,u);R?(s==null||s(R),n(!1),e==null||e({action:"update",type:"success",context:"requisitionList"})):e==null||e({action:"update",type:"error",context:"requisitionList"})}catch{e==null||e({action:"update",type:"error",context:"requisitionList"})}},[i.uid,i.page_info,s,e,u]),D=p(()=>{h(!0)},[]),C=p(async()=>{q(!0);try{if(await M(i.uid)){const c={action:"delete",type:"success",context:"requisitionList"};try{localStorage.setItem("requisitionListPendingAlert",JSON.stringify(c))}catch{}if(a){const r=a();r&&typeof r=="string"&&(window.location.href=r)}}else e==null||e({action:"delete",type:"error",context:"requisitionList"})}catch{e==null||e({action:"delete",type:"error",context:"requisitionList"})}finally{q(!1),h(!1)}},[i.uid,a,e]);return m(N,{children:[t(T,{name:i.name,description:i.description,backLink:a?{url:"#",label:o.actionBackToRequisitionLists,onClick:d=>{d.preventDefault();const c=a();c&&typeof c=="string"&&(window.location.href=c)}}:void 0,actions:{onRename:w,onDelete:D,renameLabel:o.actionRename,deleteLabel:o.actionDeleteList}}),f&&t(_,{isOpen:f,isLoading:!1,title:o.updateTitle,modalContent:t(b,{mode:"update",defaultValues:{name:i.name,description:i.description||""},onSubmit:y,onCancel:()=>n(!1)}),handleModalOnClose:()=>n(!1)}),l&&t(_,{isOpen:l,isLoading:g,title:o.deleteListTitle,modalContent:o.deleteListMessage,confirmBtnCaption:o.confirmAction,closeBtnCaption:o.cancelAction,handleModalOnClose:()=>h(!1),handleModalOnConfirm:C})]})};export{H as R};
//# sourceMappingURL=RequisitionListHeader.js.map
