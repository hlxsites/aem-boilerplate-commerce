"use strict";(self.webpackChunk_dropins_storefront_quote_management=self.webpackChunk_dropins_storefront_quote_management||[]).push([[2327],{"./node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>useMDXComponents,x:()=>MDXProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/preact/compat/dist/compat.module.js");const emptyComponents={},MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.default.createContext(emptyComponents);function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.default.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.default.useMemo(function(){return"function"==typeof components?components(contextComponents):{...contextComponents,...components}},[contextComponents,components])}function MDXProvider(properties){let allComponents;return allComponents=properties.disableParentContext?"function"==typeof properties.components?properties.components(emptyComponents):properties.components||emptyComponents:useMDXComponents(properties.components),react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(MDXContext.Provider,{value:allComponents},properties.children)}},"./src/api/uploadFile/uploadFile.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>MDXContent});__webpack_require__("./node_modules/preact/compat/dist/compat.module.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/preact/compat/jsx-runtime.mjs"),_Users_oeur_Desktop_Projects_public_storefront_quote_management_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs");function _createMdxContent(props){const _components={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,_Users_oeur_Desktop_Projects_public_storefront_quote_management_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__.R)(),...props.components};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FK,{children:["\n","\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.W8,{title:"API/uploadFile"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h1,{id:"uploadfile",children:"uploadFile"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"import { uploadFile } from '@/quote-management/api/uploadFile';\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"description",children:"Description"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.p,{children:["The ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"uploadFile"})," function manages a three-step process for uploading files as negotiable quote attachments: initiating the upload to get a presigned URL, uploading the file directly to the provided presigned URL, and finalizing the upload to confirm success. Returns the uploaded file's key on success and emits error events on failure."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"usage",children:"Usage"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"basic-file-upload",children:"Basic File Upload"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"const fileInput = document.querySelector('input[type=\"file\"]');\nconst file = fileInput.files[0];\n\ntry {\n  const result = await uploadFile(file);\n} catch (error) {\n  console.error('Upload failed:', error.message);\n}\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"with-file-validation",children:"With File Validation"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"const handleFileUpload = async (file: File) => {\n  // Validate file before uploading\n  if (!file) {\n    throw new Error('No file selected');\n  }\n  \n  // Upload file\n  const { key } = await uploadFile(file);\n  return key;\n};\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"returns",children:"Returns"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.p,{children:["Returns a ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"Promise<{ key: string }>"})," that resolves to an object with the uploaded file's key:"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"{\n  key: string; // The finalized key for the uploaded file\n}\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"errors",children:"Errors"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"The function may reject with the following errors:"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:'"Invalid file"'})," - When file is null/undefined or has no name"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:'"Failed to initiate upload"'})," - When the upload initiation fails"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:'"Upload failed: [status] [statusText]"'})," - When the PUT request fails (e.g., ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:'"Upload failed: 403 Forbidden"'}),")"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:'"Failed to finish upload"'})," - When finalizing the upload fails (or custom error message from backend)"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:'"File upload failed"'})," - Generic error when a non-Error exception occurs"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["GraphQL errors (e.g., ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:'"File exceeds the maximum allowed size of 16 MB."'}),")"]}),"\n"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"error-event",children:"Error Event"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.p,{children:["Emits ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"quote-management/file-upload-error"})," event when any error occurs during the upload process."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Event Payload:"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"{\n  error: string;     // Error message\n  fileName?: string; // Name of the file that failed to upload (undefined if file is null)\n}\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Usage:"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// Listen for upload errors\nevents.on('quote-management/file-upload-error', ({ error, fileName }) => {\n  console.error(`Upload failed for ${fileName}: ${error}`);\n});\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["Uses ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"fetchGraphQl"})," to execute GraphQL mutations (",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"initiateUpload"}),", ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"finishUpload"}),")"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["Uses native ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"fetch"})," API for direct file upload to the provided presigned URL"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["Emits events via ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"@adobe-commerce/event-bus"})]}),"\n"]})]})}function MDXContent(props={}){const{wrapper:MDXLayout}={...(0,_Users_oeur_Desktop_Projects_public_storefront_quote_management_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__.R)(),...props.components};return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(MDXLayout,{...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_createMdxContent,{...props})}):_createMdxContent(props)}}}]);