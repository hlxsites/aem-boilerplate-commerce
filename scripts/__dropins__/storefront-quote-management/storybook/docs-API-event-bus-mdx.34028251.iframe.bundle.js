"use strict";(self.webpackChunk_dropins_storefront_quote_management=self.webpackChunk_dropins_storefront_quote_management||[]).push([[1469],{"./node_modules/@adobe-commerce/elsie/src/docs/API/event-bus.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>MDXContent});__webpack_require__("./node_modules/preact/compat/dist/compat.module.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/preact/compat/jsx-runtime.mjs"),_Users_oeur_Desktop_Projects_public_storefront_quote_management_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs");function _createMdxContent(props){const _components={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,_Users_oeur_Desktop_Projects_public_storefront_quote_management_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__.R)(),...props.components};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FK,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.W8,{title:"API/Event Bus"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.di,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h1,{id:"event-bus",children:"Event Bus"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"The Event Bus provides a communication system for different parts of your application to exchange messages and stay synchronized. It enables event-driven architecture for drop-ins, allowing Containers to react to changes from other Containers and communicate data changes to the storefront."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"import",children:"Import"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"From drop-in project using the SDK"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"import { events } from '@adobe-commerce/elsie/lib';\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"From integration project (storefront)"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-js",children:"import { events } from '@dropins/tools/event-bus.js';\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"core-methods",children:"Core Methods"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"subscribe-to-events",children:"Subscribe to Events"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Subscribe to events and receive notifications when they occur."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"const eventListener = events.on('<event>', (payload) => {\n  // Handle the event payload\n  console.log('Event received:', payload);\n});\n\n// Stop listening to the event\neventListener.off();\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Example:"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// Listen for cart updates\nconst cartListener = events.on('cart/data', (cartData) => {\n  if (cartData) {\n    console.log(`Cart has ${cartData.totalQuantity} items`);\n    updateCartUI(cartData);\n  } else {\n    console.log('Cart is empty');\n    showEmptyCart();\n  }\n});\n\n// Later, when you want to stop listening\ncartListener.off();\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"emit-events",children:"Emit Events"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Broadcast events to all listeners across your application."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"events.emit('<event>', payload);\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Examples:"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// Emit cart data\nconst cartData = {\n  id: 'cart-123',\n  totalQuantity: 2,\n  items: [\n    { uid: 'item-1', quantity: 1, sku: 'PROD-001', name: 'Product Name' }\n  ]\n};\n\nevents.emit('cart/data', cartData);\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"get-last-event-payload",children:"Get Last Event Payload"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Retrieve the most recent payload for a specific event."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"const lastPayload = events.lastPayload('<event>');\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Example:"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// Get the current cart state without waiting for an event\nconst currentCart = events.lastPayload('cart/data');\n\nif (currentCart) {\n  console.log('Current cart total:', currentCart.totalQuantity);\n}\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"enable-debug-logging",children:"Enable Debug Logging"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Turn on console logging to debug event flow."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// Enable logging to see all events in console\nevents.enableLogger(true);\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"advanced-features",children:"Advanced Features"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"eager-loading",children:"Eager Loading"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Execute the event handler immediately with the last known payload when subscribing. This is useful for getting the current state without waiting for the next event."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// Handler will execute immediately if there's a previous payload\nconst listener = events.on('cart/data', (cartData) => {\n  console.log('Cart data received:', cartData);\n}, { eager: true });\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Use Cases:"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.li,{children:"Initialize UI components with current state"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.li,{children:"Avoid waiting for the first event emission"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.li,{children:"Ensure components have the latest data on mount"}),"\n"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"event-scoping",children:"Event Scoping"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Create namespaced events to avoid conflicts between different parts of your application."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// Subscribe to a scoped event\nconst scopedListener = events.on('data/update', (data) => {\n  console.log('Scoped data received:', data);\n}, { scope: 'feature-a' });\n\n// Emit a scoped event\nevents.emit('data/update', payload, { scope: 'feature-a' });\n\n// Get last payload for a scoped event\nconst lastScopedData = events.lastPayload('data/update', { scope: 'feature-a' });\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Scoped Event Names:"}),"\nWhen using scopes, the actual event name becomes ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"scope/event"}),". For example:"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"'feature-a/data/update'"})," instead of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"'data/update'"})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"'module-b/user/action'"})," instead of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"'user/action'"})]}),"\n"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Use Cases:"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.li,{children:"Separate different features or modules"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.li,{children:"Different contexts within the same application"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.li,{children:"Component-specific event handling"}),"\n"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"combining-options",children:"Combining Options"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Use both eager loading and scoping together for powerful event handling."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// Subscribe to a scoped event with eager loading\nconst listener = events.on('locale', (locale) => {\n  console.log('Current locale:', locale);\n}, { \n  eager: true, \n  scope: 'user-preferences' \n});\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"event-driven-drop-ins",children:"Event-Driven Drop-ins"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"The Event Bus enables drop-ins to be truly event-driven, allowing for loose coupling between components and seamless communication across the application."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"container-to-container-communication",children:"Container-to-Container Communication"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Containers can react to changes from other Containers, enabling complex interactions without direct dependencies."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// Product Container: Emits when a product is added to cart\nfunction ProductContainer() {\n  const handleAddToCart = (product) => {\n    // Add to cart logic...\n    \n    // Notify other containers about the cart change\n    events.emit('cart/data', updatedCartData);\n  };\n  \n  return (\n    <button onClick={() => handleAddToCart(product)}>\n      Add to Cart\n    </button>\n  );\n}\n\n// Cart Container: Reacts to cart changes from any source\nfunction CartContainer() {\n  useEffect(() => {\n    const cartListener = events.on('cart/data', (cartData) => {\n      updateCartDisplay(cartData);\n      updateCartBadge(cartData.totalQuantity);\n    }, { eager: true });\n    \n    return () => cartListener.off();\n  }, []);\n  \n  return <CartDisplay />;\n}\n\n// Mini Cart Container: Also reacts to the same cart changes\nfunction MiniCartContainer() {\n  useEffect(() => {\n    const cartListener = events.on('cart/data', (cartData) => {\n      updateMiniCart(cartData);\n    }, { eager: true });\n    \n    return () => cartListener.off();\n  }, []);\n  \n  return <MiniCart />;\n}\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"storefront-communication",children:"Storefront Communication"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Drop-ins can communicate data changes to the storefront, enabling seamless integration with the host application."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// Authentication Container: Notifies storefront of login/logout\nfunction AuthContainer() {\n  const handleLogin = (userData) => {\n    // Login logic...\n    \n    // Notify storefront of authentication change\n    events.emit('authenticated', true);\n  };\n  \n  const handleLogout = () => {\n    // Logout logic...\n    \n    // Notify storefront of authentication change\n    events.emit('authenticated', false);\n  };\n  \n  return <AuthForm onLogin={handleLogin} onLogout={handleLogout} />;\n}\n\n// Storefront can listen for authentication changes\n// This would be in the host application\nconst authListener = events.on('authenticated', (isAuthenticated) => {\n  if (isAuthenticated) {\n    showUserMenu();\n    enableCheckout();\n  } else {\n    hideUserMenu();\n    disableCheckout();\n  }\n}, { eager: true });\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"best-practices",children:"Best Practices"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ol,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Always unsubscribe"})," from events when components unmount to prevent memory leaks"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Use scopes"})," to organize events by feature or component"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Enable eager loading"})," when you need immediate access to current state"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Use descriptive event names"})," that clearly indicate what data they contain"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Handle null/undefined payloads"})," gracefully in your event handlers"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Enable logging during development"})," to debug event flow"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Keep event payloads lightweight"})," to avoid performance issues"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.strong,{children:"Document your event contracts"})," so other developers know what to expect"]}),"\n"]})]})]})}function MDXContent(props={}){const{wrapper:MDXLayout}={...(0,_Users_oeur_Desktop_Projects_public_storefront_quote_management_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__.R)(),...props.components};return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(MDXLayout,{...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_createMdxContent,{...props})}):_createMdxContent(props)}},"./node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>useMDXComponents,x:()=>MDXProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/preact/compat/dist/compat.module.js");const emptyComponents={},MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.default.createContext(emptyComponents);function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.default.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.default.useMemo(function(){return"function"==typeof components?components(contextComponents):{...contextComponents,...components}},[contextComponents,components])}function MDXProvider(properties){let allComponents;return allComponents=properties.disableParentContext?"function"==typeof properties.components?properties.components(emptyComponents):properties.components||emptyComponents:useMDXComponents(properties.components),react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(MDXContext.Provider,{value:allComponents},properties.children)}}}]);