"use strict";(self.webpackChunk_dropins_storefront_quote_management=self.webpackChunk_dropins_storefront_quote_management||[]).push([[3],{"./node_modules/@adobe-commerce/elsie/src/docs/API/graphql.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>MDXContent});__webpack_require__("./node_modules/preact/compat/dist/compat.module.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/preact/compat/jsx-runtime.mjs"),_Users_oeur_Desktop_Projects_public_storefront_quote_management_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js"),_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs");function _createMdxContent(props){const _components={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,_Users_oeur_Desktop_Projects_public_storefront_quote_management_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__.R)(),...props.components};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FK,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.W8,{title:"Build Tools/GraphQL API"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.di,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h1,{id:"graphql-extensibility-api",children:"GraphQL Extensibility API"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"The GraphQL Extensibility API allows developers to extend existing GraphQL operations used by a Drop-in to meet additional data requirements without increasing code complexity or negatively impacting performance.\nThis API provides a flexible and efficient way to customize GraphQL Fragments by integrating build-time modifications into the storefront's development pipeline."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"extend-your-drop-in-graphql-fragments",children:"Extend your Drop-in GraphQL Fragments"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"To enable GraphQL Fragments to be extensible in your Drop-in, follow these steps:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"step-1-define-your-fragments",children:"Step 1: Define Your Fragments"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Create the content for the fragments you are exporting."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// ./src/api/fragments/MyFragment.ts\n\nexport const MY_FRAGMENT = `\n  fragment MY_FRAGMENT on FragmentInterface {\n    firstname\n    lastname\n    \n    favorites {\n      uid\n      name\n    }\n  }\n`;\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"step-2-create-fragments-manifest-file",children:"Step 2: Create Fragments Manifest File"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Next, create a new file for your project to list all the fragments you want to expose."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// ./src/api/fragments.ts\n\nexport { MY_FRAGMENT } from '@/my-dropin/api/graphql/MyFragment';\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"step-3-update-the-api-configuration",children:"Step 3: Update the API Configuration"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.p,{children:["Finally, add the new file reference to the API configuration in ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"./.elsie.js"}),"."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-js",children:"// ./.elsie.js\n\nmodule.exports = {\n  name: 'MyDropin',\n  api: {\n    root: './src/api',\n    importAliasRoot: '@/my-dropin/api',\n    fragments: './fragments.ts', // ðŸ‘ˆ add this line\n  },\n  components: [\n    {\n      id: 'Components',\n      root: './src/components',\n      importAliasRoot: '@/my-dropin/components',\n      cssPrefix: 'my-dropin',\n      default: true,\n    },\n  ],\n  containers: {\n    root: './src/containers',\n    importAliasRoot: '@/my-dropin/containers',\n  },\n  schema: {\n    endpoint: process.env.ENDPOINT,\n    headers: {}\n  }\n};\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"extend-the-data-module",children:"Extend the Data module"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Now that we have made our fragments extensible, we must extend the data model used in our Drop-ins."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"step-1-define-typing-to-the-initializer-api",children:"Step 1: Define Typing to the Initializer API"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.p,{children:["First, add the typing to your initializer API in ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"./src/api/initialize/initialize.ts"}),"."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// ./src/api/initialize/initialize.ts\n\nimport { Initializer, Model } from '@adobe-commerce/elsie/lib';\nimport { Lang } from '@adobe-commerce/elsie/i18n';\nimport { MyModel } from '@/my-dropin/data/models';\n\ntype ConfigProps = {\n  langDefinitions?: Lang;\n\n  // ðŸ‘‡ add your models configuration\n  models?: {\n    MyModel?: Model<MyModel>;\n  },\n};\n\nexport const initialize = new Initializer<ConfigProps>({\n  init: async (config) => {\n    const defaultConfig = {};\n    initialize.config.setConfig({ ...defaultConfig, ...config });\n  },\n\n  listeners: () => [],\n});\n\nexport const config = initialize.config;\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"step-2-extend-the-data-transformer",children:"Step 2: Extend the Data Transformer"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Then, use the configuration to extend the data transformer the model uses by deep merging the existing data transformation with the new configuration."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-ts",children:"// ./src/data/transforms/transform-my-model.ts\nimport { merge } from '@adobe-commerce/elsie/lib';\nimport { MyModel } from '@/my-dropin/data/models';\n\nexport function transformMyModel(data: any): MyModel {\n  const model = {\n    name: `${data.firstname} ${data.lastname}`,\n    favorites: data.favorites,\n  };\n\n  // Merge custom transformer, if provided\n  return merge(\n    model, // default transformer\n    config.getConfig().models?.MyModel?.transformer?.(data) // custom transformer\n  );\n}\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.hr,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h1,{id:"using-the-graphql-extensibility-feature-in-your-storefront",children:"Using the GraphQL Extensibility Feature in Your Storefront"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"By extending the GraphQL Fragments and Models of drop-ins, you can leverage the drop-in's existing GraphQL operations and add extra fields needed to meet your specific business requirements.\nThis approach enhances the user experience while maintaining code simplicity and performance efficiency since all modifications are integrated into the storefront's development build-time pipeline."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h2,{id:"extend-drop-ins-fragments-and-models",children:"Extend Drop-in's Fragments and Models"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Follow these steps to extend the GraphQL Fragment and Model in your Drop-in:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"step-1-extend-the-graphql-fragment",children:"Step 1: Extend the GraphQL Fragment"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.p,{children:["Use the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"overrideGQLOperations"})," function to extend the existing GraphQL Fragment, allowing you to add fields to the fragment as needed."]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.p,{children:["The ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"overrideGQLOperations"})," functions accept an array of configuration objects where you must specify:"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h4,{id:"npm-string",children:"npm: string"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:'The node module name of the drop-in. i.e. "@dropins/my-dropin".'}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h4,{id:"operations-string",children:"operations: string[]"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"An array of string or template literal with operations."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.li,{children:"Only one definition can be provided in the operation."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["These must match the operation name as provided by the drop-in. i.e. ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"MY_FRAGMENT"}),"."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["The operations must be valid GraphQL operations, such as Fragment. i.e. ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"fragment MY_FRAGMENT on FragmentInterface { ... }"}),"."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["In the case of a Fragment, the fragment name must match the same interface as the drop-in. i.e. ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"FragmentInterface"}),"."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["If an existing field that has variables is used:","\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.ul,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["If not variables are provided, the existing variables will be used. i.e. ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"favorites(page: 1) { ... }"}),"."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["If new variables are provided, the new variable will be added. i.e. ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"favorites(page: 1, offset: 5) { ... }"}),"."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.FD)(_components.li,{children:["If the existing variables are changed, the new variables will be used. i.e. ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{children:"favorites(page: 2) { ... }"}),"."]}),"\n"]}),"\n"]}),"\n"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-js",children:"import overrideGQLOperations from '@dropins/build-tools/gql-extend.js';\n\noverrideGQLOperations([\n  {\n    npm: '@dropins/my-dropin',\n    operations: [`\n      fragment MY_FRAGMENT on FragmentInterface {\n        age\n        \n        favorites {\n          quantity\n        }\n      }\n    `],\n  },\n]);\n"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.h3,{id:"step-2-extend-the-data-model",children:"Step 2: Extend the Data Model"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.p,{children:"Next, update the data models to include the new fields added to the fragment, ensuring that the additional data is correctly processed and available for use in the drop-in. i.e., Slots, Event Bus, etc."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_components.code,{className:"language-js",children:"import * as api from '@dropins/storefront-cart/api.js';\n\ninitializers.register(api.initialize, {\n  models: {\n    MyModel: {\n      transformer: (data) => ({\n        age: data?.age,\n        favorites: data.favorites.map((favorite) => ({ \n          quantity: favorite.quantity,\n        })),\n      }),\n    },\n  },\n});\n\n"})})]})]})}function MDXContent(props={}){const{wrapper:MDXLayout}={...(0,_Users_oeur_Desktop_Projects_public_storefront_quote_management_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_2__.R)(),...props.components};return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(MDXLayout,{...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_createMdxContent,{...props})}):_createMdxContent(props)}},"./node_modules/@storybook/addon-docs/node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>useMDXComponents,x:()=>MDXProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/preact/compat/dist/compat.module.js");const emptyComponents={},MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.default.createContext(emptyComponents);function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.default.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.default.useMemo(function(){return"function"==typeof components?components(contextComponents):{...contextComponents,...components}},[contextComponents,components])}function MDXProvider(properties){let allComponents;return allComponents=properties.disableParentContext?"function"==typeof properties.components?properties.components(emptyComponents):properties.components||emptyComponents:useMDXComponents(properties.components),react__WEBPACK_IMPORTED_MODULE_0__.default.createElement(MDXContext.Provider,{value:allComponents},properties.children)}}}]);