/*! Copyright 2026 Adobe
All Rights Reserved. */
import{f as C,C as i,L as f}from"./getAdobeCommerceOptimizerData.js";const u=e=>({firstName:e.firstName,lastName:e.lastName,emailAddress:(e==null?void 0:e.email)||"",accountId:(e==null?void 0:e.email)||""}),d="accountContext",m="channelContext";var g=(e=>(e.CREATE_ACCOUNT_EVENT="create-account",e.SIGN_IN="sign-in",e.SIGN_OUT="sign-out",e))(g||{});const s={CREATE_ACCOUNT:"create-account",SIGN_IN:"sign-in",SIGN_OUT:"sign-out"};function l(){return window.adobeDataLayer=window.adobeDataLayer||[],window.adobeDataLayer}function c(e,t){const o=l();o.push({[e]:null}),o.push({[e]:t})}function h(){c(m,{_id:"https://ns.adobe.com/xdm/channels/web",_type:"https://ns.adobe.com/xdm/channel-types/web"})}function r(e,t){l().push(n=>{const a=n.getState?n.getState():{};n.push({event:e,eventInfo:{...a,...t}})})}function N(e){const t=u(e);c(d,t),r(s.CREATE_ACCOUNT)}function T(e){const t=u(e);c(d,t),r(s.SIGN_IN)}function _(){r(s.SIGN_OUT)}const y=(e,t)=>{const o=sessionStorage.getItem("storeConfig"),a={...o?JSON.parse(o):{},...t};switch(h(),e){case"create-account":N(a);break;case"sign-in":T(a);break;case"sign-out":_();break;default:return null}},S=e=>{if(!e||typeof e!="string")return null;try{const t=e.split(".");if(t.length!==3)return console.error("[decodeJwtToken] Invalid JWT format: expected 3 parts"),null;const n=t[1].replace(/-/g,"+").replace(/_/g,"/"),a=n.padEnd(n.length+(4-n.length%4)%4,"="),p=atob(a);return JSON.parse(p)}catch(t){return console.error("[decodeJwtToken] Failed to decode JWT:",t),null}},A=async()=>{const e=await C(),t=f.includes(window.location.hostname)?"":"Secure";document.cookie=`${i.auth_dropin_admin_session}=true; path=/; ${e}; SameSite=Lax; ${t};`},w=()=>{document.cookie=`${i.auth_dropin_admin_session}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT;`},O=e=>!!S(e);export{g as E,w as d,O as i,y as p,A as s};
//# sourceMappingURL=decodeJwtToken.js.map
