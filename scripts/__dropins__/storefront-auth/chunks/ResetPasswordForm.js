/*! Copyright 2026 Adobe
All Rights Reserved. */
import{jsxs as p,jsx as s}from"@dropins/tools/preact-jsx-runtime.js";import{classes as x,Slot as g}from"@dropins/tools/lib.js";import{v as _,F as P}from"./Button.js";import"@dropins/tools/event-bus.js";import"@dropins/tools/recaptcha.js";import{r as v}from"./requestPasswordResetEmail.js";import{g as N,c as y,u as T,B as b}from"./Button2.js";import{useState as E,useCallback as R}from"@dropins/tools/preact-hooks.js";import{useText as F}from"@dropins/tools/i18n.js";import{Header as L,InLineAlert as D}from"@dropins/tools/components.js";import{s as B,D as A}from"./simplifyTransformAttributesForm.js";import*as h from"@dropins/tools/preact-compat.js";const j=a=>h.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a},h.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M7.74512 9.87701L12.0001 14.132L16.2551 9.87701",stroke:"currentColor",strokeWidth:1,strokeLinecap:"square",strokeLinejoin:"round"})),q=({routeSignIn:a,onErrorCallback:i,onSuccessCallback:c,setActiveComponent:d,handleSetInLineAlertProps:e})=>{const t=F({successPasswordResetEmailNotification:"Auth.Notification.successPasswordResetEmailNotification"}),[f,r]=E(!1),m=R(async n=>{n.preventDefault();const o=N(n.target);if(!_(o==null?void 0:o.email))return;r(!0);const u=await v(o.email);if(r(!1),!u.success){i==null||i(u),e==null||e({type:"error",text:u.message});return}if(c){await c();return}e==null||e({type:"success",text:t.successPasswordResetEmailNotification.replace("{email}",o.email)})},[e,i,c,t.successPasswordResetEmailNotification]),w=R(()=>{if(y(d)){d("signInForm");return}y(a)&&(window.location.href=a())},[d,a]);return{isLoading:f,submitResetPassword:m,redirectToSignInPage:w}},Q=({formSize:a="default",routeSignIn:i,setActiveComponent:c,onErrorCallback:d,onSuccessCallback:e,slots:t,...f})=>{const r=F({title:"Auth.ResetPasswordForm.title",buttonPrimary:"Auth.ResetPasswordForm.buttonPrimary",buttonSecondary:"Auth.ResetPasswordForm.buttonSecondary",formAriaLabel:"Auth.ResetPasswordForm.formAriaLabel"}),{inLineAlertProps:m,handleSetInLineAlertProps:w}=T(),{isLoading:n,submitResetPassword:o,redirectToSignInPage:u}=q({routeSignIn:i,setActiveComponent:c,onErrorCallback:d,onSuccessCallback:e,handleSetInLineAlertProps:w}),l={isLoading:n};return p("div",{...f,className:x(["auth-reset-password-form",`auth-reset-password-form--${a}`]),"data-testid":"resetPasswordForm",children:[s(g,{name:"Title","data-testid":"title",slot:t==null?void 0:t.Title,context:{...l},children:s(L,{title:r.title,divider:!1,className:"auth-reset-password-form__title"})}),m.text?s(D,{className:"auth-reset-password-form__notification",type:m.type,variant:"secondary",heading:m.text,icon:m.icon}):null,s(P,{"aria-labelledby":r.formAriaLabel,name:"resetPassword_form",className:"auth-reset-password-form__form",onSubmit:o,loading:n,fieldsConfig:B(A),formSlot:{name:"Form",slot:t==null?void 0:t.Form,context:l,dataTestId:"form"},children:p(g,{name:"Buttons",className:"auth-reset-password-form__buttons","data-testid":"buttons",slot:t==null?void 0:t.Buttons,context:{...l},children:[s(b,{className:"auth-reset-password-form__buttons--signin",type:"button",variant:"tertiary",style:{padding:"0"},icon:s(j,{style:{transform:"rotate(90deg)"}}),buttonText:r.buttonSecondary,enableLoader:!1,onClick:u}),s(b,{type:"submit",buttonText:r.buttonPrimary,variant:"primary",enableLoader:n})]})}),s("div",{id:"requestPasswordResetEmail"})]})};export{Q as R};
//# sourceMappingURL=ResetPasswordForm.js.map
