/*! Copyright 2025 Adobe
All Rights Reserved. */
import{Initializer as D}from"@dropins/tools/lib.js";import{events as m}from"@dropins/tools/event-bus.js";import{s as _}from"./state.js";function w(e,r,t,n){function o(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function f(i){try{c(n.next(i))}catch(u){s(u)}}function S(i){try{c(n.throw(i))}catch(u){s(u)}}function c(i){i.done?a(i.value):o(i.value).then(f,S)}c((n=n.apply(e,r||[])).next())})}function E(){return w(this,arguments,void 0,function*(e={}){if("PaymentServicesSDK"in window)return window.PaymentServicesSDK;if(yield T(e.customUrl||"https://payments-sdk.int.magento-payments.com/v0/3/PaymentSDK.js?v=0.3.5-alpha.11",e.scriptAttributes||{}),!("PaymentServicesSDK"in window))throw new Error("Script loaded, but Payment Services SDK not found.");return window.PaymentServicesSDK})}function T(e,{crossOrigin:r,integrity:t}){const n=document.createElement("script");return r!=null&&(n.crossOrigin=r),t!=null&&(n.integrity=t),new Promise((o,a)=>{n.src=e,n.async=!0,n.onload=()=>o(),n.onerror=s=>a(s),document.head.appendChild(n)})}var A=E;function C(e){_.value={paymentsSDK:e,status:"ready"}}function P(){_.value={paymentsSDK:null,status:"error"}}const v=new D({init:async e=>{const r={};v.config.setConfig({...r,...e}),A().then(async t=>{const[n,o]=await Promise.all([d(t,e,p.CHECKOUT),d(t,e,p.PRODUCT_DETAIL)]);C({checkout:n,productDetail:o})}).catch(t=>{console.error("Error occurred during payment services drop-in initialization.",t),P()})},listeners:()=>[]});async function d(e,r,t){const n=new e({apiUrl:r==null?void 0:r.apiUrl,getCustomerToken:r==null?void 0:r.getCustomerToken});return await n.Payment.init({location:t}),y(n.Payment.CreditCard,l.CREDIT_CARD,t),y(n.Payment.ApplePay,l.APPLE_PAY,t),n}function y(e,r,t){e.isAvailable()&&(m.emit(`payment-services/method-available/${t.toLowerCase().replace("_","-")}`,r),t===p.CHECKOUT&&m.emit("payment-services/method-available",r))}const O=v.config;var l=(e=>(e.APPLE_PAY="payment_services_paypal_apple_pay",e.CREDIT_CARD="payment_services_paypal_hosted_fields",e.FASTLANE="payment_services_paypal_fastlane",e.GOOGLE_PAY="payment_services_paypal_google_pay",e.SMART_BUTTONS="payment_services_paypal_smart_buttons",e.VAULT="payment_services_paypal_vault",e))(l||{}),p=(e=>(e.CHECKOUT="CHECKOUT",e.PRODUCT_DETAIL="PRODUCT_DETAIL",e))(p||{});export{l as P,p as a,O as c,v as i};
//# sourceMappingURL=location.js.map
