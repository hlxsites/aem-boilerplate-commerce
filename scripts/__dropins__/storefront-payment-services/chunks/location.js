/*! Copyright 2025 Adobe
All Rights Reserved. */
import{Initializer as w}from"@dropins/tools/lib.js";import{events as f}from"@dropins/tools/event-bus.js";import{signal as A}from"@dropins/tools/signals.js";function C(e,i,t,n){function o(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function D(r){try{u(n.next(r))}catch(l){s(l)}}function S(r){try{u(n.throw(r))}catch(l){s(l)}}function u(r){r.done?a(r.value):o(r.value).then(D,S)}u((n=n.apply(e,i||[])).next())})}function E(){return C(this,arguments,void 0,function*(e={}){if("PaymentServicesSDK"in window)return window.PaymentServicesSDK;if(yield P(e.customUrl||"https://payments-sdk.int.magento-payments.com/v0/4/PaymentSDK.js?v=0.4.1-alpha.3",e.scriptAttributes||{}),!("PaymentServicesSDK"in window))throw new Error("Script loaded, but Payment Services SDK not found.");return window.PaymentServicesSDK})}function P(e,{crossOrigin:i,integrity:t}){const n=document.createElement("script");return i!=null&&(n.crossOrigin=i),t!=null&&(n.integrity=t),new Promise((o,a)=>{n.src=e,n.async=!0,n.onload=()=>o(),n.onerror=s=>a(s),document.head.appendChild(n)})}var T=E;const _=A({status:"initializing",paymentsSDK:null});function h(e){_.value={paymentsSDK:e,status:"ready"}}function K(){_.value={paymentsSDK:null,status:"error"}}const d=new w({init:async e=>{const i={};d.config.setConfig({...i,...e}),T().then(async t=>{const[n,o]=await Promise.all([m(t,p.CHECKOUT),m(t,p.PRODUCT_DETAIL)]);h({checkout:n,productDetail:o})}).catch(t=>{console.error("Error occurred during payment services drop-in initialization.",t),K()})},listeners:()=>[]});async function m(e,i){const t=d.config.getConfig(),n=new e({apiUrl:t==null?void 0:t.apiUrl,getCustomerToken:t==null?void 0:t.getCustomerToken,storeViewCode:t==null?void 0:t.storeViewCode});return await n.Payment.init({location:i}),b(n,i),n}function b(e,i){const t=`payment-services/initialized/${v(i)}`,n={availablePaymentMethods:[]};e.Payment.ApplePay.isAvailable()&&(n.availablePaymentMethods.push(c.APPLE_PAY),y(i,c.APPLE_PAY)),e.Payment.CreditCard.isAvailable()&&(n.availablePaymentMethods.push(c.CREDIT_CARD),y(i,c.CREDIT_CARD)),f.emit(t,n)}function y(e,i){const t=`payment-services/method-available/${v(e)}`;f.emit(t,i)}function v(e){return e.toLowerCase().replace("_","-")}const g=d.config;var c=(e=>(e.APPLE_PAY="payment_services_paypal_apple_pay",e.CREDIT_CARD="payment_services_paypal_hosted_fields",e.FASTLANE="payment_services_paypal_fastlane",e.GOOGLE_PAY="payment_services_paypal_google_pay",e.SMART_BUTTONS="payment_services_paypal_smart_buttons",e.VAULT="payment_services_paypal_vault",e))(c||{}),p=(e=>(e.CHECKOUT="CHECKOUT",e.PRODUCT_DETAIL="PRODUCT_DETAIL",e))(p||{});export{c as P,p as a,g as c,d as i,_ as s};
//# sourceMappingURL=location.js.map
