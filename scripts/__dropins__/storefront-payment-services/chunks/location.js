/*! Copyright 2025 Adobe
All Rights Reserved. */
import{Initializer as S}from"@dropins/tools/lib.js";import{events as D}from"@dropins/tools/event-bus.js";import{s as y}from"./state.js";function w(e,a,n,t){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function f(s){try{c(t.next(s))}catch(p){o(p)}}function v(s){try{c(t.throw(s))}catch(p){o(p)}}function c(s){s.done?i(s.value):r(s.value).then(f,v)}c((t=t.apply(e,a||[])).next())})}function E(){return w(this,arguments,void 0,function*(e={}){if("PaymentServicesSDK"in window)return window.PaymentServicesSDK;if(yield T(e.customUrl||"https://payments-sdk.int.magento-payments.com/v0/3/PaymentSDK.js?v=0.3.5-alpha.18",e.scriptAttributes||{}),!("PaymentServicesSDK"in window))throw new Error("Script loaded, but Payment Services SDK not found.");return window.PaymentServicesSDK})}function T(e,{crossOrigin:a,integrity:n}){const t=document.createElement("script");return a!=null&&(t.crossOrigin=a),n!=null&&(t.integrity=n),new Promise((r,i)=>{t.src=e,t.async=!0,t.onload=()=>r(),t.onerror=o=>i(o),document.head.appendChild(t)})}function A(e){y.value={paymentsSDK:e,status:"ready"}}function C(){y.value={paymentsSDK:null,status:"error"}}const _=new S({init:async e=>{const a={};_.config.setConfig({...a,...e}),E({customUrl:"https://localhost:3005/PaymentSDK.js"}).then(async n=>{const[t,r]=await Promise.all([m(n,e,l.CHECKOUT),m(n,e,l.PRODUCT_DETAIL)]);A({checkout:t,productDetail:r})}).catch(n=>{console.error("Error occurred during payment services drop-in initialization.",n),C()})},listeners:()=>[]});async function m(e,a,n){const t=new e({apiUrl:a==null?void 0:a.apiUrl,getCustomerToken:a==null?void 0:a.getCustomerToken});return await t.Payment.init({location:n}),d(t.Payment.CreditCard,u.CREDIT_CARD,n),d(t.Payment.ApplePay,u.APPLE_PAY,n),t}function d(e,a,n){if(e.isAvailable()){const r=`payment-services/method-available/${n.toLowerCase().replace("_","-")}`;D.emit(r,a)}}const U=_.config;var u=(e=>(e.APPLE_PAY="payment_services_paypal_apple_pay",e.CREDIT_CARD="payment_services_paypal_hosted_fields",e.FASTLANE="payment_services_paypal_fastlane",e.GOOGLE_PAY="payment_services_paypal_google_pay",e.SMART_BUTTONS="payment_services_paypal_smart_buttons",e.VAULT="payment_services_paypal_vault",e))(u||{}),l=(e=>(e.CHECKOUT="CHECKOUT",e.PRODUCT_DETAIL="PRODUCT_DETAIL",e))(l||{});export{u as P,l as a,U as c,_ as i};
//# sourceMappingURL=location.js.map
