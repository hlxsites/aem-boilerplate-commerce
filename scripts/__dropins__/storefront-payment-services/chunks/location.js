/*! Copyright 2025 Adobe
All Rights Reserved. */
import{Initializer as D}from"@dropins/tools/lib.js";import{events as f}from"@dropins/tools/event-bus.js";import{signal as w}from"@dropins/tools/signals.js";function C(e,n,r,t){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function v(s){try{c(t.next(s))}catch(u){o(u)}}function S(s){try{c(t.throw(s))}catch(u){o(u)}}function c(s){s.done?i(s.value):a(s.value).then(v,S)}c((t=t.apply(e,n||[])).next())})}function E(){return C(this,arguments,void 0,function*(e={}){if("PaymentServicesSDK"in window)return window.PaymentServicesSDK;if(yield T(e.customUrl||"https://payments-sdk.live.commerce-payment-services.com/v0/4/PaymentSDK.js?v=0.4.0",e.scriptAttributes||{}),!("PaymentServicesSDK"in window))throw new Error("Script loaded, but Payment Services SDK not found.");return window.PaymentServicesSDK})}function T(e,{crossOrigin:n,integrity:r}){const t=document.createElement("script");return n!=null&&(t.crossOrigin=n),r!=null&&(t.integrity=r),new Promise((a,i)=>{t.src=e,t.async=!0,t.onload=()=>a(),t.onerror=o=>i(o),document.head.appendChild(t)})}var A=E;const y=w({status:"initializing",paymentsSDK:null});function P(e){y.value={paymentsSDK:e,status:"ready"}}function K(){y.value={paymentsSDK:null,status:"error"}}const _=new D({init:async e=>{const n={};_.config.setConfig({...n,...e}),A().then(async r=>{const[t,a]=await Promise.all([m(r,e,l.CHECKOUT),m(r,e,l.PRODUCT_DETAIL)]);P({checkout:t,productDetail:a})}).catch(r=>{console.error("Error occurred during payment services drop-in initialization.",r),K()})},listeners:()=>[]});async function m(e,n,r){const t=new e({apiUrl:n==null?void 0:n.apiUrl,getCustomerToken:n==null?void 0:n.getCustomerToken,storeViewCode:n==null?void 0:n.storeViewCode});return await t.Payment.init({location:r}),d(t.Payment.CreditCard,p.CREDIT_CARD,r),d(t.Payment.ApplePay,p.APPLE_PAY,r),t}function d(e,n,r){if(e.isAvailable()){const a=`payment-services/method-available/${r.toLowerCase().replace("_","-")}`;f.emit(a,n)}}const k=_.config;var p=(e=>(e.APPLE_PAY="payment_services_paypal_apple_pay",e.CREDIT_CARD="payment_services_paypal_hosted_fields",e.FASTLANE="payment_services_paypal_fastlane",e.GOOGLE_PAY="payment_services_paypal_google_pay",e.SMART_BUTTONS="payment_services_paypal_smart_buttons",e.VAULT="payment_services_paypal_vault",e))(p||{}),l=(e=>(e.CHECKOUT="CHECKOUT",e.PRODUCT_DETAIL="PRODUCT_DETAIL",e))(l||{});export{p as P,l as a,k as c,_ as i,y as s};
//# sourceMappingURL=location.js.map
