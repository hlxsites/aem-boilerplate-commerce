/*! Copyright 2025 Adobe
All Rights Reserved. */
import{S as M}from"./chunks/vcomponent.js";import{R as te,V as ne,c as se,g as ie}from"./chunks/vcomponent.js";import{d as E}from"./chunks/cjs.js";import{d as ae,a as de,i as ue}from"./chunks/deviceUtils.js";import{C as pe,I as ge,i as fe}from"./chunks/initializer.js";import{IntlContext as F}from"./i18n.js";import{x as _,A as R,h as v,T as L,E as b,q as g,_ as V,y as D,N as q,f as Q}from"./chunks/icons/Add.js";import{g as me,s as he}from"./chunks/image-params-keymap.js";import{g as ye,s as Ie}from"./chunks/locale-config.js";import{g as Ce}from"./chunks/get-path-value.js";import"./preact-jsx-runtime.js";import"./signals.js";const H=e=>{const o=new FormData(e);return Object.fromEntries(o)},X=e=>{const o=new FormData(e),n=Object.fromEntries(o);return Object.entries(n).reduce((s,[a])=>{const u=e.elements[a];return u!=null&&u.validationMessage?{...s,[a]:u.validationMessage}:{...s}},{})},T={arrayMerge:(e,o,n)=>{const l=e.slice();return o.forEach((s,a)=>{typeof l[a]>"u"?l[a]=n.cloneUnlessOtherwiseSpecified(s,n):n.isMergeableObject(s)?l[a]=E(e[a],s,n):e.indexOf(s)===-1&&l.push(s)}),l}};function Y(e,o){return o?E(e,o,T):e}const Z=e=>e.replace("_","-");function z(e,o={},n,l,s,a="div"){const u=_(M),f=R(null),h=R("pending"),S=R([]),[y,N]=v({children:[l]}),[I,B]=v({}),O=L(()=>({get:t=>I[t],set:(t,r)=>{B({...O,[t]:r})}}),[I]),{intl:j}=_(F);o.dictionary=j.dictionary,o._setProps=t=>{N(r=>{const i=typeof t=="function"?t(r):t;if(s){const d=b(s(r),{key:"render"}),m=r.children.findIndex(p=>(p==null?void 0:p.key)==="render");r.children[m]=d}return i})};const c=g(t=>{typeof t=="function"?S.current.push(t):console.warn("Skipped: Invalid _registerMethod",t)},[]);o._registerMethod=c;const w=g(t=>V(a,{"data-slot-html-element":t.tagName.toLowerCase(),ref:r=>{r==null||r.appendChild(t)}},null),[a]);o._htmlElementToVNode=w,o.getSlotElement=g(t=>{var i,d;const r=(i=f.current)==null?void 0:i.querySelector(`[data-slot-key="${t}"]`);if(C(`ðŸŸ¦ "${e}" Slot getSlotElement: ${t}`,(d=f.current)==null?void 0:d.cloneNode(!0),r==null?void 0:r.cloneNode(!0)),!!r)return{appendChild:m=>{r.appendChild(m)},prependChild:m=>{r.insertBefore(m,r.firstChild)},appendSibling:m=>{const p=r.parentNode;p==null||p.insertBefore(m,r.nextSibling)},prependSibling:m=>{const p=r.parentNode;p==null||p.insertBefore(m,r)}}},[e]),o.onRender=g(t=>{S.current.push(t)},[]),o.onChange=o.onRender,o.replaceWith=g(t=>{c(r=>{const i=w(t);r._setProps({children:[i]})})},[w,c]),o.appendChild=g(t=>{c(r=>{const i=w(t);r._setProps(d=>({...d,children:[...d.children,i]}))})},[w,c]),o.prependChild=g(t=>{c(r=>{const i=w(t);r._setProps(d=>({...d,children:[i,...d.children]}))})},[w,c]),o.appendSibling=g(t=>{c(()=>{var i,d;const r=(i=f.current)==null?void 0:i.parentNode;r==null||r.insertBefore(t,((d=f.current)==null?void 0:d.nextSibling)??null)})},[c]),o.prependSibling=g(t=>{c(()=>{var i;const r=(i=f.current)==null?void 0:i.parentNode;r==null||r.insertBefore(t,f.current)})},[c]);const P=g(async()=>{if(h.current==="loading")return;h.current="loading",C(`ðŸŸ¨ "${e}" Slot Rendered`);const t=s?b(s(y),{key:"render"}):null;N({children:[t??l]}),S.current.forEach(r=>{r(o,O)}),h.current="ready"},[l,o,e,y,s,O]),k=g(async()=>{if(n)try{h.current="loading",C(`ðŸŸ© "${e}" Slot Initialized`),await n(o,f.current)}catch(t){console.error(`Error in "${n.name}" Slot callback`,t)}finally{h.current="ready",await P()}},[n,o,P,e]);return D(()=>{k().finally(()=>{u&&u.value.has(e)&&(u.value.delete(e),u.value=new Set(u.value))})},[]),D(()=>{P()},[JSON.stringify(o),JSON.stringify(I)]),[f,y,h.current]}const $=(e,o)=>q.map(e,n=>Q(n)?n.props.src?b(n,{...n.props,src:o?n.props.src:"","data-original-src":n.props.src}):n.props&&n.props.children?b(n,{...n.props,children:$(n.props.children,o)}):n:n);function x({name:e,lazy:o=!1,context:n,slot:l,children:s,render:a,slotTag:u="div",contentTag:f="div",...h}){const S=_(M),[y,N,I]=z(e,n,l,s,a,f);return L(()=>{if(!e)return console.warn('Slot "name" is required');S&&o===!1&&(S.value.add(e),S.value=new Set(S.value))},[e,o,S]),V(u,{...h,ref:y,"data-slot":e},$(N.children,I==="ready"))}window.DROPINS=window.DROPINS||{};window.DROPINS.showSlots=async e=>{window.sessionStorage.setItem("dropin-debugger--show-slots",e.toString()),document.body.classList.toggle("dropin-debugger--show-slots",e)};let C=()=>{};window.DROPINS.logSlots=async e=>{window.sessionStorage.setItem("dropin-debugger--log-slots",e.toString()),C=e?(...o)=>console.log(...o):()=>{}};window.DROPINS.showSlots(window.sessionStorage.getItem("dropin-debugger--show-slots")==="true");window.DROPINS.logSlots(window.sessionStorage.getItem("dropin-debugger--log-slots")==="true");function ee(e){const o=document.cookie.split(";");let n;return o.forEach(l=>{const[s,a]=l.trim().split("=");s===e&&(n=decodeURIComponent(a))}),n}export{pe as Config,ge as Initializer,te as Render,x as Slot,M as SlotQueueContext,ne as VComponent,se as classes,ae as debounce,E as deepmerge,ie as generateSrcset,ee as getCookie,X as getFormErrors,H as getFormValues,ye as getGlobalLocale,me as getImageParamsKeyMap,Ce as getPathValue,fe as initializers,de as isIOSMobileDevice,ue as isNumber,Y as merge,Ie as setGlobalLocale,he as setImageParamsKeyMap,Z as toLanguageTag,z as useSlot};
//# sourceMappingURL=lib.js.map
